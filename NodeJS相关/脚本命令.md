## 使用脚本拉取仓库代码
为什么会写这个脚本呢，因为之前在和后端同学对接的时候，老是要一个一个`git pull`代码，然后一共有七个仓库，单独操作需要pull 七次，然后在编译所以这样操作了几次之后不厌其烦，就写了个 `js`脚本

```js
const util = require('util');
const  spawn  = require('child_process').spawn;
const fs = require('fs')
const path = require('path')
const  exec  = require('child_process').exec ;
let gitFileList = [];
// 存放所有待更新的文件名
const ls  = spawn('ls');
ls.stdout.on('data', (data) => {
    const arr = data.toString().split('\n');
    arr.forEach(data => {
        const path_ = path.resolve(__dirname, data);
        if(fs.lstatSync(path_) && fs.lstatSync(path_).isDirectory() && data.length){
            gitFileList.push(path_)
     }
    })    
});

ls.on('close', code => {
    gitFileList = gitFileList.filter( item => fs.existsSync(item + '/.git') );
    console.log(gitFileList)
    for(let i = 0 ; i < gitFileList.length ; i ++){
        console.log( gitFileList[i] )
        const cwd = gitFileList[i] 
        exec('git fetch --all', { cwd} )
        exec('git reset --hard origin/master', { cwd } )
        exec('git pull', { cwd:cwd }, (error, stdout, stderr) => {
            if(error){
                console.log(error)
            }
            else{
                console.log(`run ${cwd} successfully`,stdout)
            }
        })
    }
});

```